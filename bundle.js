!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t,n){},function(e,t,n){"use strict";n.r(t);var r=n.p+"fb3ebd627a0503006135177dbf6ebd7c.png";function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$root=t,this.init()}var t,n,a;return t=e,(n=[{key:"init",value:function(){this.header=document.createElement("div"),this.header.className="header"}},{key:"create",value:function(){this.header.innerHTML=this.createHtml(),this.$root.append(this.header)}},{key:"createHtml",value:function(){return'\n      <div class="logo">\n        <img src="'.concat(r,'" alt="" />\n      </div>\n    ')}}])&&i(t.prototype,n),a&&i(t,a),e}();function o(e){return{type:"ADD_CAR_LIST",data:e}}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.select=t,this.$root=t.closest("div"),this.$elements=t.querySelectorAll("option"),this.$selected=t.querySelector("option[selected]")||"",this.placeholder=t.getAttribute("placeholder")||"Выберите...",this.init()}var t,n,r;return t=e,(n=[{key:"init",value:function(){var e=this;this.select.style.display="none",this.wrap=document.createElement("div"),this.wrap.innerHTML=this.createHTML(this.$elements),this.clickHandler=this.clickHandler.bind(this),this.wrap.addEventListener("click",this.clickHandler),this.$customSelect=this.wrap.querySelector(".custom-select"),this.$itemList=this.$customSelect.querySelectorAll('[data-type="item"]'),this.$selectedFiled=this.$customSelect.querySelector('[data-type="selected"]'),this.$root.append(this.wrap),document.addEventListener("mouseup",(function(t){t.target.closest(".custom-select._open")||e.close()}))}},{key:"clickHandler",value:function(e){var t=e.target.dataset.type;"selected"===t&&this.toggle(),"item"===t&&this.selectItem(e.target)}},{key:"selectItem",value:function(e){this.$selectedFiled.textContent=e.textContent,this.$elements.forEach((function(t){t.value===e.dataset.value&&(t.selected=!0,t.click())})),this.$customSelect.classList.add("_selected"),this.$itemList.forEach((function(e){return e.classList.remove("_selected")})),e.classList.add("_selected"),this.close()}},{key:"toggle",value:function(){this.isOpen?this.close():this.open()}},{key:"open",value:function(){this.$customSelect.classList.add("_open")}},{key:"close",value:function(){this.$customSelect.classList.remove("_open")}},{key:"createHTML",value:function(e){var t=this,n=[];return e.forEach((function(e,r){if(0!==r){var i="";e.value===t.$selected.value&&(t.placeholder=e.text,i="_selected"),n.push('<div class="item '.concat(i,'" data-type="item" data-value="').concat(e.value,'">').concat(e.text,"</div>"))}})),'\n      <div class="custom-select" name="test">\n        <div class="custom-select__selected" data-type="selected">\n          '.concat(this.placeholder,'\n        </div>\n        <div class="custom-select__dropdown">\n          ').concat(n.join(""),"\n        </div>\n      </div>\n    ")}},{key:"isOpen",get:function(){return this.$customSelect.classList.contains("_open")}}])&&c(t.prototype,n),r&&c(t,r),e}();function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var u=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$root=t,this.store=n}var t,n,r;return t=e,(n=[{key:"init",value:function(){this.formWrap=document.createElement("div"),this.formWrap.className="form",this.formWrap.innerHTML=this.createHtml(),this.form=this.formWrap.querySelector("#add_car"),this.handlerForm=this.handlerForm.bind(this),this.form.addEventListener("submit",this.handlerForm);var e=this.formWrap.querySelectorAll(".form__input"),t=this.formWrap.querySelectorAll(".custom-select"),n=this.formWrap.querySelectorAll(".form__item");e.forEach((function(e){e.addEventListener("keyup",(function(e){var t=e.target.closest(".form__item");""!==e.target.value?t.classList.add("_inputed"):t.classList.remove("_inputed")}))})),n.forEach((function(e){e.addEventListener("click",(function(e){var t=e.target.closest(".form__item");t&&t.classList.remove("_error")}))})),t.forEach((function(e){new s(e)})),this.$root.append(this.formWrap)}},{key:"handlerForm",value:function(e){e.preventDefault();var t=e.target.elements,n=t.name,r=t.year,i=t.price,a=t.description,c=t.carColor,s=t.status;if(""===n.value&&this.formError(n.closest(".form__item")),""===r.value&&this.formError(r.closest(".form__item")),""===i.value&&this.formError(i.closest(".form__item")),""===c.value){var l=document.querySelector(".form__colors").closest(".form__item");this.formError(l)}if(0===s.options.selectedIndex&&this.formError(s.closest(".form__item")),!this.form.classList.contains("_error")){var u=this.store.getState().carList,d={id:u[u.length-1]?u[u.length-1].id+1:1,title:n.value,year:r.value,price:i.value,description:a.value,color:c.value,status:s.value};u.push(d),this.store.dispatch(o(u),"changeCarList")}}},{key:"formError",value:function(e){e.classList.add("_error"),this.form.classList.add("_error")}},{key:"createHtml",value:function(){return'\n      <div class="container">\n        <form id="add_car">\n          <div class="form__line">\n            <div class="form__item">\n              <input type="text" name="name" class="form__input" />\n              <div class="form__label">Название</div>\n              <div class="form__error">Заполните поле</div>\n            </div>\n            <div class="form__item">\n              <input type="text" name="year" class="form__input" />\n              <div class="form__label">Год</div>\n              <div class="form__error">Заполните поле</div>\n            </div>\n            <div class="form__item">\n              <input type="text" name="price" class="form__input" />\n              <div class="form__label">Цена</div>\n              <div class="form__error">Заполните поле</div>\n            </div>\n          </div>\n          <div class="form__line">\n            <div class="form__item">\n              <input type="text" name="description" class="form__input" />\n              <div class="form__label">Описание</div>\n              <div class="form__error">Заполните поле</div>\n            </div>\n          </div>\n          <div class="form__line">\n            <div class="form__item form__colors">\n              <label class="item" style="background-color: #ffffff;">\n                <input type="radio" name="carColor" value="#ffffff" />\n                <div class="check"></div>\n              </label>\n              <label class="item" style="background-color: #000000;">\n                <input type="radio" name="carColor" value="#000000" />\n                <div class="check"></div>\n              </label>\n              <label class="item" style="background-color: #C4C4C4;">\n                <input type="radio" name="carColor" value="#C4C4C4" />\n                <div class="check"></div>\n              </label>\n              <label class="item" style="background-color: #DD1C10;">\n                <input type="radio" name="carColor" value="#DD1C10" />\n                <div class="check"></div>\n              </label>\n              <label class="item" style="background-color: #77CF61;">\n                <input type="radio" name="carColor" value="#77CF61" />\n                <div class="check"></div>\n              </label>\n              <div class="form__label">Цвет</div>\n              <div class="form__error">Выберите цвет</div>\n            </div>\n            <div class="form__item">\n              <select class="custom-select" name="status" placeholder="Статус">\n                <option disabled selected hidden>Статус</option>\n                <option value="В наличии">В наличии</option>\n                <option value="Ожидается">Ожидается</option>\n                <option value="Нет в наличии">Нет в наличии</option>\n              </select>\n              <div class="form__error">Выберите один из пунктов</div>\n            </div>\n            <div class="form__item">\n              <button class="form__submit" type="submit">\n                Отправить\n                <div class="arrow"></div>\n              </button>\n            </div>\n          </div>\n        </form>\n      </div>\n    '}}])&&l(t.prototype,n),r&&l(t,r),e}();function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var f=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$root=t,this.store=n,this.init()}var t,n,r;return t=e,(n=[{key:"init",value:function(){this.addCar=document.createElement("div"),this.addCar.className="add-car"}},{key:"create",value:function(){this.addCar.innerHTML=this.createHtml(),this.$root.append(this.addCar),new u(this.addCar,this.store).init()}},{key:"createHtml",value:function(){return'\n      <div class="container">\n        <div class="add-car__title h1">¡Ay caramba!</div>\n      </div>\n    '}}])&&d(t.prototype,n),r&&d(t,r),e}();function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var h=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$root=t,this.data=n,this.store=r,this.init()}var t,n,r;return t=e,(n=[{key:"init",value:function(){var e=this;this.table=document.createElement("div"),this.table.className="table-wrap",this.deleteItem=this.deleteItem.bind(this),this.table.addEventListener("click",this.deleteItem),this.store.subscribe((function(){return e.create()}),"changeCarList")}},{key:"deleteItem",value:function(e){var t=e.target.dataset.type,n=+e.target.closest(".table__row").dataset.carId,r=this.store.getState().carList;"delete-item"===t&&(r.forEach((function(e,t){e.id===n&&r.splice(t,1)})),this.store.dispatch(o(r),"changeCarList"))}},{key:"create",value:function(){this.carListData=this.store.getState().carList,this.table.innerHTML=this.createHtml(),this.$root.append(this.table)}},{key:"createHtml",value:function(){return'\n      <div class="table">\n        <div class="table__header">\n          <div class="table__row">\n            <div class="item name">Название</div>\n            <div class="item year">Год</div>\n            <div class="item color">Цвет</div>\n            <div class="item status">Статус</div>\n            <div class="item price">Цена</div>\n            <div class="item delete">&nbsp;</div>\n          </div>\n        </div>\n        <div class="table__body">\n          '.concat(this.createBody(this.carListData).join(""),"\n        </div>\n      </div>\n    ")}},{key:"createBody",value:function(e){var t=this,n=[];return 0===e.length?n.push('<div class="empty">Список пуст</div>'):e.forEach((function(e){n.push("".concat(t.createRow(e)))})),n}},{key:"createRow",value:function(e){var t=e.id,n=e.title,r=e.description,i=e.year,a=e.color,o=e.status,c=e.price,s="";return"white"!==a&&"#fff"!==a&&"#ffffff"!==a||(s="_light-color"),'\n      <div class="table__row" data-car-id="'.concat(t,'">\n        <div class="item name">\n          <div class="title">').concat(n,'</div>\n          <div class="text-help">').concat(r,'</div>\n        </div>\n        <div class="item year">').concat(i,'</div>\n        <div class="item color ').concat(s,'">\n          <div style="background: ').concat(a,'"></div>\n        </div>\n        <div class="item status">').concat(o,'</div>\n        <div class="item price">').concat(c,' руб.</div>\n        <div class="item delete">\n          <button class="btn btn-fill btn-fill-black" data-type="delete-item">Удалить</button>\n        </div>\n      </div>\n    ')}}])&&v(t.prototype,n),r&&v(t,r),e}();function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var p=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$root=t,this.store=n,this.init()}var t,n,r;return t=e,(n=[{key:"init",value:function(){this.$carList=document.createElement("div"),this.$carList.className="car-list"}},{key:"create",value:function(){this.$carList.innerHTML=this.createHtml(),this.$root.append(this.$carList);var e=this.$carList.querySelector(".container");this.table=new h(e,this.carListData,this.store),this.table.create()}},{key:"createHtml",value:function(){return'\n      <div class="container">\n        <div class="block-title">АВТОМОБИЛИ В НАЛИЧИИ</div>\n      </div>\n    '}}])&&m(t.prototype,n),r&&m(t,r),e}();function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var y=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$root=t,this.init()}var t,n,r;return t=e,(n=[{key:"init",value:function(){this.footer=document.createElement("div"),this.footer.className="footer"}},{key:"create",value:function(){this.footer.innerHTML=this.createHtml(),this.$root.appendChild(this.footer)}},{key:"createHtml",value:function(){return'\n      <div class="container">\n        <div class="footer__wrap">\n          <div>© 2020 CAPTAIN QUACK</div>\n          <div>Десница тысячелетия и моллюск!</div>\n        </div>\n      </div>\n    '}}])&&b(t.prototype,n),r&&b(t,r),e}();function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){k(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var w={carList:[]};function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function L(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){j(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function E(e,t){switch(t.type){case"ADD_CAR_LIST":return L(L({},e),{},{carList:t.data});default:return e}}function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var $=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$root=document.getElementById(t),this.init()}var t,n,r;return t=e,(n=[{key:"init",value:function(){var e=this,t=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e(g({},t),{type:"__INIT__"}),r={};return{subscribe:function(e,t){return r[t]=r[t]||[],r[t].push(e),{unsubscribe:function(){r[t]=r[t].filter((function(t){return t!==e}))}}},dispatch:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";n=e(n,t),i&&r[i].forEach((function(e){return e(n)}))},getState:function(){return n}}}(E,w),n=[a,f,p,y];fetch("https://rawgit.com/Varinetz/e6cbadec972e76a340c41a65fcc2a6b3/raw/90191826a3bac2ff0761040ed1d95c59f14eaf26/frontend_test_table.json").then((function(e){return e.json()})).then((function(e){t.dispatch(o(e),"changeCarList")})),this.components=n.map((function(n){return new n(e.$root,t)})),this.components.forEach((function(e){return e.create()}))}}])&&C(t.prototype,n),r&&C(t,r),e}();n(0);new $("app")}]);
//# sourceMappingURL=bundle.js.map